function showMask(){var e=0;if(W("#ft").length==0)var t=W("#footer")[0],e=110;else var t=W("#ft")[0];var n=t.offsetTop+t.clientHeight+e;n<W("body")[0].clientHeight&&(n=W("body")[0].clientHeight),W("#mask").css("height",n+"px").show()}function initFeedback(){W("#feedbackform").reset(),W("#feedback_success").hide(),W("#feedbackform").show(),W("#feedback textarea, #feedback input.number").removeClass("focus"),W("#feedback .tag li").removeClass("on").first().addClass("on")}Dom.ready(function(){var e=W("#totop_btn");W(window).on("scroll",function(t){var n=document.documentElement.scrollTop||document.body.scrollTop;n>=400&&e.css("visibility")=="hidden"&&e.css("visibility","visible"),n<400&&e.css("visibility")=="visible"&&e.css("visibility","hidden")})}),W("#totop_btn").click(function(e){e.preventDefault();var t=Dom.getDocRect().scrollX;window.scrollTo(t,0)}),W("#feedback_btn").click(function(e){e.preventDefault(),showMask(),W("#feedback").show(),initFeedback()}),W("#feedback .js-cancel").click(function(e){e.preventDefault(),W("#feedback, #mask").hide(),W("#feedback textarea, #feedback input.number").removeClass("focus")}),W("#feedback .tag li").click(function(e){e.preventDefault(),W(this).addClass("on").siblings("li").removeClass("on");var t=W(this).attr("text-default");W("#feedback textarea").hasClass("focus")||W("#feedback textarea").val(t).attr("text-default",t).removeClass("focus")}),W("#feedback textarea, #feedback input.number").focus(function(){var e=W(this).addClass("focus").attr("text-default");W("#feedback_hit").hide(),this.value==e&&(this.value="")}).blur(function(){if(this.value.replace(/ /ig,"")==""){var e=W(this).removeClass("focus").attr("text-default");this.value=e}}),W("#feedback_agin").click(initFeedback);var getDeviceInfo=function(){var e={screen:"",browser:{}},t=window.navigator,n="userAgent,platform,product,language,oscpu,vendor,cookieEnabled,onLine,buildID".split(",");for(var r=0,i=n.length;r<i;r++)typeof t[n[r]]!="undefined"&&(e.browser[n[r]]=t[n[r]]);return e.screen=screen.width+"*"+screen.height,Object.stringify(e)};W("#deviceinfo").val(getDeviceInfo()),W("#submit_btn").click(function(e){e.preventDefault();if(W("#message").val().trim()==""||W("#message").val().trim()==W("#message").attr("text-default"))return W("#feedback_hit").show(),!1;W("#feedback_referer").val(window.location.href),W("#message_real")[0].value="#"+W("#feedbackform .on .m").html()+"#"+W("#message")[0].value,W("#feedbackform").submit(),W("#feedback_success").show(),W("#feedbackform").hide()});